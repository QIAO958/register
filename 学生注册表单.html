<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>学生注册表单</title>
    <style>
        input {
            width: 500px;
            height: 30px;
            margin-bottom: 5px;
        }
        input[type="submit"] {
            background-color: royalblue;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1 style="text-align:center;">学生注册表单</h1>
    <form onsubmit="return form_validate()">
        <label for="username">姓名:</label>
        <br>
        <input id="username" name="username" placeholder="4-8位字母/数字/下划线（如Zhang123）">
        <br>
        <label for="pnumber">手机号:</label>
        <br>
        <input id="pnumber" name="pnumber" placeholder="请输入11位手机号">
        <br>
        <label for="email">邮箱:</label>
        <br>
        <input id="email" name="email" placeholder="可选，如student@school.com">
        <br>
        <label for="password">密码:</label>
        <br>
        <input id="password" name="password" type="password" placeholder="至少6位，含字母和数字">
        <br>
        <label for="confirmPassword">确认密码:</label>
        <br>
        <input id="confirmPassword" name="confirmPassword" type="password" placeholder="请再次输入密码">
        <br>
        <input type="submit" value="注册"/>
    </form>

    <script>
        function form_validate() {
            // 1. 校验姓名（4-8位字母/数字/下划线）
            let username = document.getElementById("username");
            let usernameReg = /^\w{4,8}$/;
            if (!usernameReg.test(username.value.trim())) {
                alert("姓名格式不正确！需4-8位字母、数字或下划线");
                username.focus();
                return false;
            }

            // 2. 校验手机号（11位数字，修复正则）
            let pnumber = document.getElementById("pnumber");
            let phoneReg = /^\d{11}$/; // 关键修复：\d 匹配数字
            if (!phoneReg.test(pnumber.value.trim())) {
                alert("手机号码格式不正确！需11位数字");
                pnumber.focus();
                return false;
            }

            // 3. 校验邮箱（可选，有输入才校验，修复大括号闭合）
            let email = document.getElementById("email");
            let emailValue = email.value.trim();
            if (emailValue !== "") {
                let emailReg = /^[A-Za-z0-9_]+@[A-Za-z0-9]+\.(com|cn|gov\.cn|org)$/;
                if (!emailReg.test(emailValue)) {
                    alert("Email格式不正确！示例：student@school.com");
                    email.focus();
                    return false;
                }
            } // 关键修复：补上邮箱逻辑的闭合大括号

            // 4. 校验密码（至少6位，含字母+数字）
            let password = document.getElementById("password");
            let passwordReg = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/;
            if (!passwordReg.test(password.value)) {
                alert("密码格式不正确！需至少6位，且包含字母和数字");
                password.focus();
                return false;
            }

            // 5. 校验确认密码（修复变量名）
            let confirmPassword = document.getElementById("confirmPassword");
            if (confirmPassword.value !== password.value) {
                alert("确认密码与密码不一致！");
                confirmPassword.focus();
                return false;
            }

            // 所有校验通过（可弹出提示）
            alert("注册信息正确，即将提交！");
            return true;
        }
    </script>
</body>
</html>
